<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniGame</title>

    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.2/aframe/build/aframe-ar.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<script>
    AFRAME.registerComponent('for_a_marker', {
        init: function () {
            var play = document.getElementById('Play');
            var highscore = document.getElementById('HighScore');
            var header = document.getElementById('Header');
            var pplane = document.getElementById('P-Plane');
            var hsplane = document.getElementById('HS-Plane');
            
            var headerquestion = document.getElementById('H-Question');
            var qA = document.getElementById('A');
            var qB = document.getElementById('B');
            var qC = document.getElementById('C');
            var qD = document.getElementById('D');
            var num = 1;
            var score = 0;
            
            qA.setAttribute('position', '0 100 100');
            qB.setAttribute('position', '0 100 100');
            qC.setAttribute('position', '0 100 100');
            qD.setAttribute('position', '0 100 100');
            
            // var aplane = document.getElementById('A-Plane');
            // var bplane = document.getElementById('B-Plane');
            // var cplane = document.getElementById('C-Plane');
            // var dplane = document.getElementById('D-Plane');
            function changeColor (e) { 
                 
            }
            
            //Change to Question 2
            function changeQuestion2(e) {
                num++

                qA.setAttribute('color', 'white');
                qB.setAttribute('color', 'white');
                qC.setAttribute('color', 'white');
                qD.setAttribute('color', 'white');
                
                headerquestion.setAttribute('value', 'What was the name  given to Petrus Johannes de Witâ€™s Father In Law, Adriaan Koek by the Malay rulers?');
                qA.setAttribute('value', 'The Merchant');
                qB.setAttribute('value', 'Tuan Raja');
                qC.setAttribute('value', 'The Trader');
                qC.setAttribute('position', '-1.7 0.75 -3.4');
                qD.setAttribute('value', 'Tuan Raja Muda');
                qD.setAttribute('position', '0.2 0.75 -3.4');
            }

            //Change to Question 3
            function changeQuestion3(e) {
                num++

                qA.setAttribute('color', 'white');
                qB.setAttribute('color', 'white');
                qC.setAttribute('color', 'white');
                qD.setAttribute('color', 'white');

                headerquestion.setAttribute('value', 'Which occupation did the grandfather, John Charles De Witt have that brought the family much recognition?');
                qA.setAttribute('value', 'Working with Seafield Estates');
                qA.setAttribute('position', '-1.75 0.75 -4');
                qA.setAttribute('width', '2.6');

                qB.setAttribute('value', 'Signal Master at Malayan Railways4');
                qB.setAttribute('position', '0.2 0.75 -4');
                qB.setAttribute('width', '2.2');

                qC.setAttribute('value', 'Distributor of Singer Sewing Machines for Southern Malaya');
                qC.setAttribute('position', '-1.75 0.75 -3.4');
                qC.setAttribute('width', '1.9');

                qD.setAttribute('value', 'None of the above');
                qD.setAttribute('position', '0.4 0.75 -3.4');
                qD.setAttribute('position', '0.4 0.75 -3.4');
                qD.setAttribute('width', '2.9');
            }

            //Game
            play.addEventListener("click", function (mouseenter) {
                // Clean
                header.setAttribute('value', '');
                play.setAttribute('value', '');
                highscore.setAttribute('value', '');

                // pplane.setAttribute('color', 'black');
                // pplane.setAttribute('position', '-0.9 0.3 -3.7');
                // hsplane.setAttribute('color', 'black');
                // hsplane.setAttribute('position', '-0.9 0.3 -3.7');
                
                // Question 1
                headerquestion.setAttribute('value', 'Where did Willem Adriaan de Wit come from before landing in Malacca?');
                qA.setAttribute('position', '-1.7 0.75 -4');
                qB.setAttribute('position', '0.4 0.75 -4');
                qC.setAttribute('position', '-1.4 0.75 -3.4');
                qD.setAttribute('position', '0.5 0.75 -3.4');
            
                // aplane.setAttribute('color', 'blue');
                // bplane.setAttribute('color', 'blue');
                // cplane.setAttribute('color', 'blue');
                // dplane.setAttribute('color', 'blue');

                // Checking Answer
                [ qA, qB, qC, qD ].forEach(function(element) {
                    element.addEventListener("click", function(mouseenter) {
                        if (event.currentTarget.id == "B" && num == 1){
                            alert("yaya");
                            event.currentTarget.setAttribute('color', 'green');
                            score++;
                        }
                        else if (event.currentTarget.id == "D" && num == 2){
                            alert("yaya");
                            event.currentTarget.setAttribute('color', 'green');
                            score++;
                        } 
                        else if (event.currentTarget.id == "C" && num == 3){
                            alert("yaya");
                            event.currentTarget.setAttribute('color', 'green');
                            score++;
                        }
                        else {
                            alert ("nope");
                            event.currentTarget.setAttribute('color', 'red');
                        }
                        
                        if (num == 1){
                            setTimeout(function(){
                                changeQuestion2 ();
                            },1000);
                        }
                        else if (num == 2){
                            setTimeout(function(){
                                changeQuestion3 ();
                            },1000);                      
                        } 
                        else {
                            alert('done');
                        }
                        
                        
                    });
                });

            });
        }
    });

</script>

<body style='margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs='debugUIEnabled: false; sourceType: webcam' vr-mode-ui='enabled: false'>
        <a-entity cursor="rayOrigin: mouse" raycaster="objects: .intersectable; useWorldCoordinates: true;"></a-entity>

        <a-marker-camera id="marker" preset="hiro" emitevents="true" for_a_marker>
            <a-entity position="0 0 2" scale="0.5 0.5 0.5">
                <!-- Header -->
                <a-text id="Header" value="Do you know the DeWitt Family?" position="-1.57 1 -4.5" rotation="-90 0 0"></a-text> 

                <!-- HighScore Btn -->
                <a-text id="HighScore" class="intersectable" value="High Scores" position="-1.5 0.75 -3.7" rotation="-90 0 0" color='green'></a-text>
                <!-- <a-plane id="HS-Plane" position="-0.9 0.6 -3.7" rotation="-90 0 0" width="1.0" height="0.5" color="red" material="transparent: true; opacity: 0.5"></a-plane> -->
                
                <!-- Play Btn -->
                <a-text id="Play" class="intersectable" value="Play" position="0.5 0.75 -3.7" rotation="-90 0 0" color='red'></a-text>
                <!-- <a-plane id="P-Plane" position="0.7 0.6 -3.7" rotation="-90 0 0" width="0.7" height="0.5" color="green" material="transparent: true; opacity: 0.5"></a-plane>  -->
                
                <!-- Header Question -->
                <a-text id="H-Question" value="" width="3.8" position="-1.8 1 -4.6" rotation="-90 0 0"></a-text>  

                <!-- Choices -->
                <a-text id="A" class="intersectable" value="Johannesburg" position="-1.7 0.75 -4" width="5" rotation="-90 0 0" color="white"></a-text>
                <a-text id="B" class="intersectable" value="Cape Town" position="0.4 0.75 -4" width="5" rotation="-90 0 0" color="white"></a-text>
                <a-text id="C" class="intersectable" value="Durban" position="-1.4 0.75 -3.4" width="5" rotation="-90 0 0" color="white"></a-text>
                <a-text id="D" class="intersectable" value="Portugal" position="0.5 0.75 -3.4" width="5" rotation="-90 0 0" color="white"></a-text>

                <!-- Choices Plane -->
                <!-- <a-plane id="A-Plane" position="-1 0.5 -4" rotation="-90 0 0" width="1.7" height="0.4" color="black" material="transparent: true; opacity: 0.5"></a-plane> 
                <a-plane id="B-Plane" position="1 0.5 -4" rotation="-90 0 0" width="1.7" height="0.4" color="black" material="transparent: true; opacity: 0.5"></a-plane>
                <a-plane id="C-Plane" position="-1 0.5 -3.35" rotation="-90 0 0" width="1.7" height="0.4" color="black" material="transparent: true; opacity: 0.5"></a-plane> 
                <a-plane id="D-Plane" position="1 0.5 -3.35" rotation="-90 0 0" width="1.7" height="0.4" color="black" material="transparent: true; opacity: 0.5"></a-plane> -->

                <!-- Container -->
                <a-plane position="0 0.25 -4" rotation="-90 0 0" width="4.5" height="2.2" color="black" material="transparent: true; opacity: 0.5"></a-plane>
            </a-entity>
        </a-marker-camera>
    </a-scene>
</body>

</html>
<!-- <a-entity camera></a-entity> -->
<!-- <a-box position="-1 0.5 -4" rotation="0 45 0" width="1" height="1" depth="1" color="#4CC3D9" shadow></a-box> 
            <a-cylinder position="1 0.75 -4" radius="0.5" height="1.5" color="#FFC65D" shadow></a-cylinder> -->
<!-- <a-plane color="black" rotation="-90 0 0" position="0 -0.25 0" width="5" material="transparent: true; opacity: 0.90"></a-plane>
                <a-text class="header" value="Do you know the DeWitt Family?" rotation="-90 0 0" align="center"></a-text> -->


<!-- Image  -->
<!-- <a-image id="test" src="yourimage.png" position="0 0 0" rotation="-90 0 0" width="" height="" opacity="1" transparent="true" alpha-test="0.2" shader="standard" scale="1 1 1" visible="" material="" geometry=""></a-image> -->
<!-- <a-box position='0 0.5 0' material='opacity: 0.5;'></a-box> -->

<!-- $(document).ready(function () {
         $('section:not(#start)').hide();
         $('.btn').on('click', function () {
             showThis = $(this).data('target');
             $('section').hide();
             $(showThis).show();
         });
     }); -->

     <!-- [ qA, qB, qC, qD ].forEach(function(element) {
        element.addEventListener("click", function(mouseenter) {
            alert("do your stuff");
            
        });
    }); -->